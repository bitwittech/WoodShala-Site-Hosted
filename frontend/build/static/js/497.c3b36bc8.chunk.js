"use strict";(self.webpackChunkwoodsala_site=self.webpackChunkwoodsala_site||[]).push([[497],{16679:function(e,t,n){n(72791);t.Z=n.p+"static/media/defaultProduct.b2c4afc8d023a2ef7598d06e8a5ba757.svg"},83497:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(4942),i=n(74165),a=n(15861),o=n(1413),c=n(29439),s=n(72791),u=n(64554),d=n(61889),l=n(36151),p=n(20890),h=n(13400),m=n(27391),x=n(13239),f=n(94721),Z=n(54270),g=n(43504),j=n(29961),y=n(54277),v=n(70169),b=n(7178),_=n(16088),C=(n(62836),n(27247)),P=n(47422),w=n(16679),S=n(59434),N=n(18986),k=n(80184);function I(){var e=(0,j.l)(),t=(0,y.P)(e,v.bu),n=(0,y.P)(e,v.UB);return(0,k.jsx)(_.Z,{color:"primary",count:n,page:t+1,onChange:function(t,n){return e.current.setPage(n-1)}})}var U=function(e){var t=(0,S.I0)(),n=(0,S.v9)((function(e){return e})),j=(0,s.useState)([]),y=(0,c.Z)(j,2),v=y[0],_=y[1],U=(0,s.useState)({isLoading:!1,applied:!1,coupon_type:void 0,coupon_value:0,code:"",total:0,subtotal:0,discount:0}),q=(0,c.Z)(U,2),K=q[0],R=q[1];function L(){return L=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,P.s_)(JSON.stringify(n.cart.items.map((function(e){return e.product_id}))));case 2:(t=e.sent)&&_(t.data.map((function(e,t){var r=e[0].categories[0].discount_limit&&e[0].discount_limit>e[0].categories[0].discount_limit?e[0].categories[0].discount_limit:e[0].discount_limit;return r=n.cart.items.filter((function(t){return t.product_id===e[0].SKU}))[0].quantity*e[0].selling_price/100*r,{id:t+1,SKU:e[0].SKU,product:e[0].featured_image||e[0].product_image[0],product_name:e[0].product_title,price:n.cart.items.filter((function(t){return t.product_id===e[0].SKU}))[0].quantity*e[0].selling_price,qty:n.cart.items.filter((function(t){return t.product_id===e[0].SKU}))[0].quantity,discount:r,total:n.cart.items.filter((function(t){return t.product_id===e[0].SKU}))[0].quantity*e[0].selling_price-r,action:e[0].SKU}})));case 4:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}(0,s.useEffect)((function(){!function(){L.apply(this,arguments)}()}),[n.cart]),(0,s.useEffect)((function(){var e=v.reduce((function(e,t){return e+parseInt(t.price)}),0),t=v.reduce((function(e,t){return e+parseInt(t.total)}),0),n="FLAT"===K.coupon_type?K.coupon_value:e/100*K.coupon_value;R((function(r){return(0,o.Z)((0,o.Z)({},r),{},{total:(t-n).toFixed(2),subtotal:e.toFixed(2),discount:e-t})}))}),[v,K.coupon_type]);var T=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.auth.isAuth){e.next=5;break}return e.next=3,(0,P.B8)({CID:n.auth.CID,product_id:r.SKU}).then((function(e){return t((0,N.cl)(r.SKU)),t((0,N.br)({variant:"warning",message:e.data.message,open:!0}))})).catch((function(){return t((0,N.br)({variant:"error",message:"Something Went Wrong !!!",open:!0}))}));case 3:e.next=7;break;case 5:return t((0,N.cl)(r.SKU)),e.abrupt("return",t((0,N.br)({variant:"warning",message:"Item removed added to the cart !!!",open:!0})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=[{field:"id",renderHeader:function(){return(0,k.jsx)("strong",{children:"S.No"})},width:50},{field:"SKU",renderHeader:function(){return(0,k.jsx)("strong",{children:"SKU"})},width:100},{field:"product",align:"center",width:200,renderHeader:function(){return(0,k.jsx)("strong",{children:"Product"})},renderCell:function(e){return(0,k.jsx)(u.Z,{component:g.rU,to:"/details/".concat(e.row.SKU,"/").concat(e.row.product_name),children:void 0!==e.formattedValue?(0,k.jsx)("img",{className:"productImage",src:e.formattedValue||w.Z,alt:"category"}):(0,k.jsx)("img",{className:"productImage",src:w.Z,alt:"category"})})}},{field:"product_name",renderHeader:function(){return(0,k.jsx)("strong",{children:"Product Name"})},width:200},{field:"price",renderHeader:function(){return(0,k.jsx)("strong",{children:"Price (Rupee)"})},type:"number",width:120,align:"center"},{field:"qty",renderHeader:function(){return(0,k.jsx)("strong",{children:"Quantity"})},width:150,renderCell:function(e){return(0,k.jsxs)(d.ZP,{container:!0,className:"qtyButtons",children:[(0,k.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,k.jsx)(l.Z,{onClick:function(){return r={product_id:e.row.SKU,quantity:e.row.qty},void(n.auth.isAuth?(0,P.$R)({CID:n.auth.CID,product_id:r.product_id,quantity:parseInt(r.quantity)-1}).then((function(){t((0,N.pQ)(r.product_id))})):t((0,N.pQ)(r.product_id)));var r},variant:"outlined",size:"small",children:"-"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,md:2,children:(0,k.jsx)(p.Z,{variant:"body",children:e.formattedValue})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,k.jsx)(l.Z,{onClick:function(){return r={product_id:e.row.SKU,quantity:e.row.qty},void(n.auth.isAuth?(0,P.$R)({CID:n.auth.CID,product_id:r.product_id,quantity:parseInt(r.quantity)+1}).then((function(){t((0,N.V$)(r.product_id))})):t((0,N.V$)(r.product_id)));var r},variant:"outlined",size:"small",children:"+"})})]})}},{field:"discount",renderHeader:function(){return(0,k.jsx)("strong",{children:"Discount"})},type:"number",width:100,align:"center"},{field:"total",renderHeader:function(){return(0,k.jsx)("strong",{children:"Total"})},type:"number",width:100,align:"center"},{field:"action",renderHeader:function(){return(0,k.jsx)("strong",{children:"Remove"})},headerName:"Actions",width:70,renderCell:function(e){return(0,k.jsx)("div",{className:"categoryImage",children:(0,k.jsx)(h.Z,{onClick:function(){T({SKU:e.formattedValue}).then((function(n){_(v.filter((function(t){return t.action!==e.formattedValue}))),t((0,N.br)({open:!0,variant:"warning",message:"Item Removed !!!"}))}))},"aria-label":"delete",children:(0,k.jsx)(C.Z,{})})})}}];function A(){return(A=(0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,R((function(e){return(0,o.Z)((0,o.Z)({},e),{},{isLoading:!0})})),!n.auth.email){e.next=9;break}return e.next=5,(0,P.nC)({code:K.code,email:n.auth.email});case 5:200===(r=e.sent).status?(console.log(K),R((function(e){return(0,o.Z)((0,o.Z)({},e),{},{coupon_type:r.data.coupon_type,coupon_value:"FLAT"===r.data.coupon_type?r.data.flat_amount:r.data.off,applied:!0,isLoading:!1})})),t((0,N.br)({open:!0,variant:"success",message:"Hurray, Coupon Applied"}))):(R((function(e){return(0,o.Z)((0,o.Z)({},e),{},{isLoading:!1})})),t((0,N.br)({open:!0,variant:"error",message:r.data.message||"Something Went Wrong !!!"}))),e.next=11;break;case 9:R((function(e){return(0,o.Z)((0,o.Z)({},e),{},{isLoading:!1})})),t((0,N.b_)({open:!0,type:"logIn"}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(Z.q,{children:[(0,k.jsx)("title",{children:"Cart"}),(0,k.jsx)("meta",{name:"description",content:"Woodsala cart and checkout page."})]}),(0,k.jsx)(d.ZP,{container:!0,className:"Banner",children:(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(p.Z,{variant:"h1",children:"Cart"})})}),(0,k.jsxs)(d.ZP,{container:!0,className:"mainSec",children:[(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(p.Z,{variant:"h4",children:"Cart Details"})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,className:"tableContainer",md:8.5,children:(0,k.jsx)("div",{style:{height:"450px",width:"100%"},children:(0,k.jsx)(b._,{sx:{fontWeight:400,fontSize:"1rem"},rows:v,columns:H,pageSize:5,getRowHeight:function(){return 100},rowsPerPageOptions:[5],disableSelectionOnClick:!0,disableColumnMenu:!0,components:{Pagination:I}})})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,className:"tableContainer",md:3.5,children:(0,k.jsx)(d.ZP,{container:!0,children:(0,k.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,k.jsx)(p.Z,{variant:"h5",children:"Cart Total"}),(0,k.jsxs)(d.ZP,{container:!0,className:"cartTotals",children:[(0,k.jsxs)(d.ZP,{item:!0,xs:12,className:"couponBox",children:[(0,k.jsx)(p.Z,{variant:"body1",children:"Have Any Coupon Code? Apply here."}),(0,k.jsx)("br",{}),(0,k.jsxs)("div",{className:"applyBox",children:[(0,k.jsx)(m.Z,{size:"small",variant:"outlined",name:"code",disabled:K.applied,value:K.code||"",onChange:function(e){return R((function(t){return(0,o.Z)((0,o.Z)({},t),{},{code:e.target.value})}))},label:"Coupon Code"}),K.applied?(0,k.jsx)(l.Z,{onClick:function(){return R((function(e){return(0,o.Z)((0,o.Z)({},e),{},{code:"",coupon_value:0,coupon_type:void 0,applied:!1})}))},sx:{fontWeight:"400"},size:"small",variant:"contained",children:"Remove"}):(0,k.jsx)(l.Z,{disabled:K.isLoading,onClick:function(){return A.apply(this,arguments)},sx:{fontWeight:"400"},size:"small",variant:"contained",children:K.isLoading?(0,k.jsx)(x.Z,{size:"2rem",color:"secondary"}):"Apply"})]})]}),(0,k.jsx)(d.ZP,{sx:{mt:2,mb:2},item:!0,xs:12,children:(0,k.jsx)(f.Z,{})}),(0,k.jsxs)(d.ZP,{item:!0,xs:12,className:"subTotal",children:[(0,k.jsx)(p.Z,{variant:"body",children:"Number Items"}),(0,k.jsxs)(p.Z,{variant:"body",children:[n.cart.items.length," unit"]})]}),K.coupon_type&&(0,k.jsxs)(d.ZP,{item:!0,xs:12,className:"subTotal",children:[(0,k.jsx)(p.Z,{variant:"body",children:"Coupon"}),"FLAT"===K.coupon_type?(0,k.jsxs)(p.Z,{variant:"body",children:["-"," ",K.coupon_value.toLocaleString("us-Rs",{style:"currency",currency:"INR"})]}):(0,k.jsxs)(p.Z,{variant:"body",children:["- ",K.coupon_value,"%"]})]}),0!==K.discount&&(0,k.jsxs)(d.ZP,{item:!0,xs:12,className:"subTotal",children:[(0,k.jsx)(p.Z,{variant:"body",children:"Discount"}),(0,k.jsxs)(p.Z,{variant:"body",children:["-"," ",K.discount.toLocaleString("us-Rs",{style:"currency",currency:"INR"})]})]}),(0,k.jsxs)(d.ZP,{item:!0,xs:12,className:"subTotal",children:[(0,k.jsx)(p.Z,{variant:"body",children:"Subtotal"}),(0,k.jsx)(p.Z,{variant:"body",children:K.subtotal.toLocaleString("us-Rs",{style:"currency",currency:"INR"})})]}),(0,k.jsxs)(d.ZP,{sx:{mt:2},item:!0,xs:12,children:[(0,k.jsx)(f.Z,{}),(0,k.jsx)("br",{})]}),(0,k.jsxs)(d.ZP,{item:!0,xs:12,className:"Total",children:[(0,k.jsx)(p.Z,{variant:"body1",children:"Total"}),(0,k.jsx)(p.Z,{variant:"body1",children:K.total.toLocaleString("us-Rs",{style:"currency",currency:"INR"})})]}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(f.Z,{})}),(0,k.jsx)(d.ZP,{item:!0,xs:12,children:(0,k.jsx)(l.Z,{disabled:v.length<=0,onClick:function(){e.history("/checkout",{state:{total:K.total,subtotal:K.subtotal,quantity:v.reduce((function(e,t){return(0,o.Z)((0,o.Z)({},e),{},(0,r.Z)({},t.SKU,t.qty))}),{}),product:v}})},sx:{fontWeight:"500"},variant:"contained",fullWidth:!0,children:"Proceed To CheckOut"})})]})]})})})]})]})}},62836:function(){}}]);
//# sourceMappingURL=497.c3b36bc8.chunk.js.map