"use strict";(self.webpackChunkwoodsala_site=self.webpackChunkwoodsala_site||[]).push([[497],{83497:function(t,e,n){n.r(e),n.d(e,{default:function(){return U}});var r=n(4942),i=n(1413),a=n(74165),s=n(15861),c=n(29439),o=n(72791),d=n(64554),u=n(61889),l=n(36151),h=n(20890),m=n(13400),x=n(27391),f=n(94721),p=n(54270),j=n(20501),g=n(29961),Z=n(54277),y=n(70169),b=n(35327),v=n(16088),_=n(27247),P=n(20980),S=n(16679),C=n(59434),w=n(18986),N=n(80184);function I(){var t=(0,g.l)(),e=(0,Z.P)(t,y.bu),n=(0,Z.P)(t,y.UB);return(0,N.jsx)(v.Z,{color:"primary",count:n,page:e+1,onChange:function(e,n){return t.current.setPage(n-1)}})}var U=function(t){var e=(0,C.I0)(),n=(0,C.v9)((function(t){return t})),g=(0,o.useState)([]),Z=(0,c.Z)(g,2),y=Z[0],v=Z[1],U=(0,o.useState)("EUR"),q=(0,c.Z)(U,2),K=(q[0],q[1],(0,o.useState)({total:0,subtotal:0})),k=(0,c.Z)(K,2),R=k[0],H=k[1];(0,o.useEffect)((function(){(0,P.s_)(JSON.stringify(n.cart.items.map((function(t){return t.product_id})))).then((function(t){v(t.data.map((function(t,e){var r=t[0].categories.length>0&&(t[0].discount_limit<t[0].categories[0].discount_limit?t[0].discount_limit:t[0].categories[0].discount_limit);return{id:e+1,SKU:t[0].SKU,product:t[0].featured_image||t[0].product_image[0],product_name:t[0].product_title,price:n.cart.items.filter((function(e){return e.product_id===t[0].SKU}))[0].quantity*t[0].selling_price,qty:n.cart.items.filter((function(e){return e.product_id===t[0].SKU}))[0].quantity,total:n.cart.items.filter((function(e){return e.product_id===t[0].SKU}))[0].quantity*t[0].selling_price-n.cart.items.filter((function(e){return e.product_id===t[0].SKU}))[0].quantity*t[0].selling_price/100*r,action:t[0].SKU}})))}))}),[n.cart]),(0,o.useEffect)((function(){H({total:y.reduce((function(t,e){return t+parseInt(e.total)}),0),subtotal:y.reduce((function(t,e){return t+parseInt(e.price)}),0)})}),[y]);var T=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.auth.isAuth){t.next=5;break}return t.next=3,(0,P.B8)({CID:n.auth.CID,product_id:r.SKU}).then((function(t){return e((0,w.cl)(r.SKU)),e((0,w.br)({variant:"warning",message:t.data.message,open:!0}))})).catch((function(t){return e((0,w.br)({variant:"error",message:"Something Went Wrong !!!",open:!0}))}));case 3:t.next=7;break;case 5:return e((0,w.cl)(r.SKU)),t.abrupt("return",e((0,w.br)({variant:"warning",message:"Item removed added to the cart !!!",open:!0})));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=[{field:"id",renderHeader:function(){return(0,N.jsx)("strong",{children:"S.No"})},width:50},{field:"SKU",renderHeader:function(){return(0,N.jsx)("strong",{children:"SKU"})},width:100},{field:"product",align:"center",width:200,renderHeader:function(){return(0,N.jsx)("strong",{children:"Product"})},renderCell:function(t){return(0,N.jsx)(d.Z,{component:j.rU,to:"/details/".concat(t.row.SKU,"/").concat(t.row.product_name),children:void 0!==t.formattedValue?(0,N.jsx)("img",{className:"productImage",src:t.formattedValue||S.Z,alt:"category"}):(0,N.jsx)("img",{className:"productImage",src:S.Z,alt:"category"})})}},{field:"product_name",renderHeader:function(){return(0,N.jsx)("strong",{children:"Product Name"})},width:200},{field:"price",renderHeader:function(){return(0,N.jsx)("strong",{children:"Price (Rupee)"})},type:"number",width:120,align:"center"},{field:"qty",renderHeader:function(){return(0,N.jsx)("strong",{children:"Quantity"})},width:150,renderCell:function(t){return(0,N.jsxs)(u.ZP,{container:!0,className:"qtyButtons",children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,md:3,children:(0,N.jsx)(l.Z,{onClick:function(){return r={product_id:t.row.SKU,quantity:t.row.qty},void(n.auth.isAuth?(0,P.$R)({CID:n.auth.CID,product_id:r.product_id,quantity:parseInt(r.quantity)-1}).then((function(){e((0,w.pQ)(r.product_id))})):e((0,w.pQ)(r.product_id)));var r},variant:"outlined",size:"small",children:"-"})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,md:2,children:(0,N.jsx)(h.Z,{variant:"body",children:t.formattedValue})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,md:3,children:(0,N.jsx)(l.Z,{onClick:function(){return r={product_id:t.row.SKU,quantity:t.row.qty},void(n.auth.isAuth?(0,P.$R)({CID:n.auth.CID,product_id:r.product_id,quantity:parseInt(r.quantity)+1}).then((function(){e((0,w.V$)(r.product_id))})):e((0,w.V$)(r.product_id)));var r},variant:"outlined",size:"small",children:"+"})})]})}},{field:"total",renderHeader:function(){return(0,N.jsx)("strong",{children:"Total"})},type:"number",width:100,align:"center"},{field:"action",renderHeader:function(){return(0,N.jsx)("strong",{children:"Remove"})},headerName:"Actions",width:70,renderCell:function(t){return(0,N.jsx)("div",{className:"categoryImage",children:(0,N.jsx)(m.Z,{onClick:function(){T({SKU:t.formattedValue}).then((function(n){v(y.filter((function(e){return e.action!==t.formattedValue}))),e((0,w.br)({open:!0,variant:"warning",message:"Item Removed !!!"}))}))},"aria-label":"delete",children:(0,N.jsx)(_.Z,{})})})}}];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(p.q,{children:[(0,N.jsx)("title",{children:"Cart"}),(0,N.jsx)("meta",{name:"description",content:"Woodsala cart and checkout page."})]}),(0,N.jsx)(u.ZP,{container:!0,className:"Banner",children:(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(h.Z,{variant:"h1",children:"Cart"})})}),(0,N.jsxs)(u.ZP,{container:!0,className:"mainSec",children:[(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(h.Z,{variant:"h4",children:"Cart Details"})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:"tableContainer",md:8.5,children:(0,N.jsx)("div",{style:{height:"450px",width:"100%"},children:(0,N.jsx)(b._,{sx:{fontWeight:400,fontSize:"1rem"},rows:y,columns:D,pageSize:5,getRowHeight:function(){return 100},rowsPerPageOptions:[5],disableSelectionOnClick:!0,disableColumnMenu:!0,components:{Pagination:I}})})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,className:"tableContainer",md:3.5,children:(0,N.jsx)(u.ZP,{container:!0,children:(0,N.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,N.jsx)(h.Z,{variant:"h5",children:"Cart Total"}),(0,N.jsxs)(u.ZP,{container:!0,className:"cartTotals",children:[(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:"couponBox",children:[(0,N.jsx)(h.Z,{variant:"body1",children:"Have Any Coupon Code? Apply here."}),(0,N.jsx)("br",{}),(0,N.jsxs)("div",{className:"applyBox",children:[(0,N.jsx)(x.Z,{size:"small",variant:"outlined",label:"Coupon Code"}),(0,N.jsx)(l.Z,{sx:{fontWeight:"400"},size:"small",variant:"contained",children:"Apply"})]})]}),(0,N.jsx)(u.ZP,{sx:{mt:2,mb:2},item:!0,xs:12,children:(0,N.jsx)(f.Z,{})}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:"subTotal",children:[(0,N.jsx)(h.Z,{variant:"body",children:"Number Items"}),(0,N.jsxs)(h.Z,{variant:"body",children:[n.cart.items.length," unit"]})]}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:"subTotal",children:[(0,N.jsx)(h.Z,{variant:"body",children:"Discount"}),(0,N.jsxs)(h.Z,{variant:"body",children:["- ",(R.subtotal-R.total).toLocaleString("us-Rs",{style:"currency",currency:"INR"})]})]}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:"subTotal",children:[(0,N.jsx)(h.Z,{variant:"body",children:"Subtotal"}),(0,N.jsx)(h.Z,{variant:"body",children:R.subtotal.toLocaleString("us-Rs",{style:"currency",currency:"INR"})})]}),(0,N.jsxs)(u.ZP,{sx:{mt:2},item:!0,xs:12,children:[(0,N.jsx)(f.Z,{}),(0,N.jsx)("br",{})]}),(0,N.jsxs)(u.ZP,{item:!0,xs:12,className:"Total",children:[(0,N.jsx)(h.Z,{variant:"body1",children:"Total"}),(0,N.jsx)(h.Z,{variant:"body1",children:R.total.toLocaleString("us-Rs",{style:"currency",currency:"INR"})})]}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{})}),(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsx)(l.Z,{disabled:y.length<=0,onClick:function(){t.history("/checkout",{state:{total:R.total,subtotal:R.subtotal,quantity:y.reduce((function(t,e){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e.SKU,e.qty))}),{}),product:y}})},sx:{fontWeight:"500"},variant:"contained",fullWidth:!0,children:"Proceed To CheckOut"})})]})]})})})]})]})}}}]);
//# sourceMappingURL=497.c926cc7e.chunk.js.map